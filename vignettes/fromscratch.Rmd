---
title: "Power Analysis from Scratch"
output: html_document
---

```{r, echo=FALSE, message=FALSE}
devtools::load_all("..")
```

```{r options, echo=FALSE, message=FALSE}
simrOptions(nsim=100, progress=FALSE)
```



### Covariates and parameters

First set up some covariates with `expand.grid`.

```{r}
x <- rep(1:10)
g <- c('a', 'b', 'c')

X <- expand.grid(x=x, g=g)
```

Specify some fixed and random parameters.

```{r}
b <- c(2, -0.1) # fixed intercept and slope
V <- 0.5 # random intercept variance
```

### Build a model object

Use the `makeGlmer` or `makeLmer` function to build an artificial `lme4` object.

```{r}
model1 <- makeGlmer(z ~ x + (1|g), family="poisson", fixef=b, VarCorr=V, data=X)
print(model1)
```

### Start the power analysis

Now we have a "pilot" model, which can be used with `simr`.

```{r}
powerSim(model1, nsim=20)
```
